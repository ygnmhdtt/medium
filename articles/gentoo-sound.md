---
title: "ThinkPad上のLinuxで音を出すためにやったこと"
date: 2017-12-30T11:04:42+09:00
tags:
- Linux
- Gentoo
- alsa
---

Xとfluxboxを入れたは良いものの、音が出なかったので、対応した。

<!--more-->

### ハードウェアレベルの調査
まずはハードウェアレベルの調査。
サウンドカードがカーネルに認識されているかをチェックする。

```
$ lspci | grep -i audio
```

筆者の場合はIntelのデバイス情報が出力されたので、サウンドカードはカーネルに認識されていると判断した。
万が一なにも表示されない場合、カーネルに対してマシン上のオーディオデバイスの設定を組み込む必要がある。

### 権限の調査

該当ユーザが `audio` グループに入っていることを確認。

```
$ groups
```

`audio` とでなければ、usermodする。

### ミュート状況の調査

以下はThinkPadの設定なので注意。
Thinkpad ACPIが独立したレイヤでオーディオを管理しているらしいので確認する。

```
$ cat /proc/acpi/ibm/volume
level:          10
mute:           on
```

筆者の場合は `mute` が `on` になっていた。
これを `off` にすれば出る気がする。

### 1. マシンからミュート解除

大概のマシンにはミュートを解除するボタンが有ると思うので押してみる。
これで `off` になって、実際音も出れば最高だが、筆者はこれではダメだった。

### 2. ALSAから設定する
Linuxでは音をだすためのソフトウェアとして広く `ALSA` と `OSS` が使われている。とりあえずALSAを使ってみる。
以下でインストール。

```
$ emerge --ask media-sound/alsa-utils
```

そして、以下のコマンドで確認。

```
$ alsamixer
```

色々インジケータが出て来るはず。
まずは左端のMasterが、 `MM` になっている場合、ミュート状態なので、 `m` を押して `00` に変える。
その上で矢印キーを押して音量を調整する。
これで `esc` して、 `cat /proc/acpi/ibm/volume` して、offになっていることを確認する。

### まとめ
YouTubeが見られて嬉しい!!!
